<app-auth-modal />

<!-- ===== STICKY HEADER ===== -->
<header class="landing-header">
  <a class="landing-header__brand" routerLink="/" aria-label="Journeo accueil">
    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
      <circle cx="16" cy="16" r="16" fill="var(--color-primary)"/>
      <path d="M10 22 L16 10 L22 22" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
      <circle cx="16" cy="10" r="2" fill="white"/>
    </svg>
    <span>Journeo</span>
  </a>
  <nav class="landing-header__nav">
    <button class="btn btn--ghost btn--sm" (click)="modal.open('login')">
      Se connecter
    </button>
    <button class="btn btn--primary btn--sm" (click)="modal.open('register')">
      Créer un compte
    </button>
  </nav>
</header>

<!-- ===== HERO ===== -->
<section class="hero" aria-labelledby="hero-heading">
  <div class="hero__bg"></div>
  <div class="hero__overlay"></div>
  <div class="hero__content">
    <p class="hero__eyebrow">Découvrez le monde autrement</p>
    <h1 id="hero-heading" class="hero__title">
      Des guides de voyage<br>
      <span>créés par des passionnés</span>
    </h1>
    <p class="hero__subtitle">
      Explorez des itinéraires soigneusement élaborés, activité par activité, jour après jour.
    </p>
    <div class="hero__actions">
      <button class="btn btn--primary hero__cta" (click)="modal.open('register')">
        Commencer l'aventure
      </button>
      <button class="btn btn--ghost hero__cta-secondary" (click)="modal.open('login')">
        Se connecter
      </button>
    </div>
  </div>
  <!-- Scroll hint -->
  <div class="hero__scroll-hint" aria-hidden="true">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M12 5v14M5 12l7 7 7-7"/>
    </svg>
  </div>
</section>

<!-- ================= GALLERY ================= -->
<section class="gallery-section">
  <h2 class="section-title">Destinations populaires</h2>

  <div
    class="gallery-scroll"
    role="list"
    aria-label="Galerie de destinations"
  >
    @for (img of galleryImages; track img.url; let i = $index) {

      <div
        class="gallery-card"
        role="listitem"
        (mouseenter)="playVideo(i)"
        (mouseleave)="stopVideo(i)"
      >

        <!-- IMAGE PREVIEW -->
        <img
          [src]="getPreviewImage(img.alt)"
          [alt]="img.alt"
          class="gallery-card__img"
          loading="lazy"
        />

        <!-- VIDEO (hover uniquement) -->
        <video
          #videoPlayer
          class="gallery-card__video"
          muted
          loop
          playsinline
          preload="none"
        >
          <source [src]="img.url" type="video/mp4" />
        </video>

        <!-- LABEL -->
        <div class="gallery-card__label">
          {{ img.alt }}
        </div>

      </div>

    }
  </div>
</section>


<!-- ===== GUIDES PREVIEW ===== -->
<section class="guides-section" aria-labelledby="guides-heading">
  <div class="section-container">
    <h2 id="guides-heading" class="section-title">Guides disponibles</h2>
    <p class="section-subtitle">Connectez-vous pour accéder aux guides partagés avec vous</p>
  </div>

  <div class="guide-preview-scroll" role="list">
    @if (guides().length > 0) {
      @for (guide of guides(); track guide.id) {
        <article class="guide-preview-card" role="listitem" [style.background]="gradientFor(guide.saison)">
          <div class="guide-preview-card__overlay">
            <div class="guide-preview-card__badges">
              <span class="guide-badge">{{ guide.jours }}j</span>
              <span class="guide-badge">{{ guide.mobilite }}</span>
            </div>
            <h3 class="guide-preview-card__title">{{ guide.titre }}</h3>
            @if (guide.description) {
              <p class="guide-preview-card__desc">{{ guide.description }}</p>
            }
            <button class="guide-preview-card__cta" (click)="modal.open('login')">
              Voir ce guide →
            </button>
          </div>
        </article>
      }
    } @else {
      @for (p of [1, 2, 3, 4]; track p) {
        <article class="guide-preview-card guide-preview-card--placeholder" role="listitem">
          <div class="guide-preview-card__overlay">
            <div class="shimmer shimmer--badge"></div>
            <div class="shimmer shimmer--title"></div>
            <div class="shimmer shimmer--text"></div>
            <button class="guide-preview-card__cta" (click)="modal.open('login')">
              Se connecter pour voir →
            </button>
          </div>
        </article>
      }
    }
  </div>
</section>

<!-- ===== CTA BANNER ===== -->
<section class="cta-banner" aria-labelledby="cta-heading">
  <div class="cta-banner__content">
    <h2 id="cta-heading" class="cta-banner__title">Prêt à explorer ?</h2>
    <p class="cta-banner__subtitle">Rejoignez Journeo et accédez à vos guides de voyage.</p>
    <button class="btn btn--primary btn--lg" (click)="modal.open('register')">
      Créer mon compte gratuitement
    </button>
  </div>
</section>

<!-- ===== FOOTER ===== -->
<footer class="landing-footer">
  <div class="landing-footer__inner">
    <div class="landing-footer__brand">
      <svg width="22" height="22" viewBox="0 0 32 32" fill="none">
        <circle cx="16" cy="16" r="16" fill="var(--color-primary)"/>
        <path d="M10 22 L16 10 L22 22" stroke="white" stroke-width="2.5" stroke-linecap ="round" stroke-linejoin="round"/>
        <circle cx="16" cy="10" r="2" fill="white"/>
      </svg>
      <span>Journeo</span>
    </div>
    <p class="landing-footer__copy">&copy; 2026 Journeo. Tous droits réservés.</p>
  </div>
</footer>
