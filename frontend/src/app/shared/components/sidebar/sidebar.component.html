<aside class="sidebar" [class.sidebar--open]="sidebarState.isOpen()">
  <!-- ================= HEADER ================= -->
  <div class="sidebar__header">
    <a routerLink="/dashboard" class="sidebar__brand" (click)="sidebarState.close()">
      <svg class="sidebar__brand-icon" width="28" height="28" viewBox="0 0 32 32" fill="none">
        <circle cx="16" cy="16" r="16" fill="#e8501e"/>
        <path d="M8 20l4-8 4 4 4-6 4 10"
              stroke="#fff"
              stroke-width="2.5"
              stroke-linecap="round"
              stroke-linejoin="round"/>
      </svg>

      <span class="sidebar__brand-name">Journeo</span>
    </a>
  </div>

  <!-- ================= QUICK ACTION ================= -->
  <div class="sidebar__quick">
    @if (auth.isAdmin()) {
      <a
        routerLink="/dashboard/guides/new"
        class="sidebar__create"
        (click)="sidebarState.close()"
      >
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" aria-hidden="true">
          <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
        Nouveau guide
      </a>
    }
  </div>

  <!-- ================= NAV ================= -->
  <nav class="sidebar__nav">

    <!-- SECTION -->
    <div class="sidebar__section">
      <span class="sidebar__section-title">Navigation</span>

      <ul class="sidebar__list">

        <!-- DASHBOARD -->
        <li>
          <a
            routerLink="/dashboard"
            routerLinkActive="sidebar__link--active"
            [routerLinkActiveOptions]="{ exact: true }"
            class="sidebar__link"
            (click)="sidebarState.close()"
          >
            <svg class="sidebar__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
              <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>

            <span class="sidebar__label">Accueil</span>
          </a>
        </li>

        <!-- GUIDES -->
        <li>
          <a
            routerLink="/dashboard/guides"
            routerLinkActive="sidebar__link--active"
            class="sidebar__link"
            (click)="sidebarState.close()"
          >
            <svg class="sidebar__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
            </svg>

            <span class="sidebar__label">Guides</span>
          </a>
        </li>

      </ul>
    </div>

    <!-- ADMIN SECTION -->
    @if (auth.isAdmin()) {
      <div class="sidebar__section">
        <span class="sidebar__section-title">Administration</span>

        <ul class="sidebar__list">
          <li>
            <a
              routerLink="/dashboard/users"
              routerLinkActive="sidebar__link--active"
              class="sidebar__link"
              (click)="sidebarState.close()"
            >
              <svg class="sidebar__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75"/>
              </svg>

              <span class="sidebar__label">Utilisateurs</span>
            </a>
          </li>
        </ul>
      </div>
    }

    <!-- spacer intelligent -->
    <div class="sidebar__spacer"></div>

  </nav>

  <!-- ================= USER CARD ================= -->
  <div class="sidebar__footer">
    <a
      routerLink="/dashboard/profile"
      routerLinkActive="sidebar__link--active"
      class="sidebar__link sidebar__link--profile"
      (click)="sidebarState.close()"
    >
      <div class="sidebar__avatar">
        {{ (auth.firstName() ?? auth.email() ?? 'U')[0].toUpperCase() }}
      </div>

      <div class="sidebar__user-info">
        <span class="sidebar__user-name">
          {{ auth.displayName() }}
        </span>

        @if (auth.isAdmin()) {
          <span class="sidebar__user-role">Admin</span>
        }
      </div>
    </a>
  </div>
</aside>
